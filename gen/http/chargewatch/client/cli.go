// Code generated by goa v3.2.6, DO NOT EDIT.
//
// chargewatch HTTP client CLI support package
//
// Command:
// $ goa gen chargewatch/design

package client

import (
	chargewatch "chargewatch/gen/chargewatch"
	"encoding/json"
	"fmt"

	goa "goa.design/goa/v3/pkg"
)

// BuildListDevicesPayload builds the payload for the chargewatch listDevices
// endpoint from CLI flags.
func BuildListDevicesPayload(chargewatchListDevicesUserID string) (*chargewatch.ListDevicesPayload, error) {
	var userID string
	{
		userID = chargewatchListDevicesUserID
	}
	v := &chargewatch.ListDevicesPayload{}
	v.UserID = userID

	return v, nil
}

// BuildCreateDevicePayload builds the payload for the chargewatch createDevice
// endpoint from CLI flags.
func BuildCreateDevicePayload(chargewatchCreateDeviceBody string, chargewatchCreateDeviceUserID string) (*chargewatch.CreateDevicePayload, error) {
	var err error
	var body struct {
		// device name
		Name *string `form:"name" json:"name" xml:"name"`
		// description
		Description string `form:"description" json:"description" xml:"description"`
	}
	{
		err = json.Unmarshal([]byte(chargewatchCreateDeviceBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"description\": \"Id omnis.\",\n      \"name\": \"Asperiores vel.\"\n   }'")
		}
	}
	var userID string
	{
		userID = chargewatchCreateDeviceUserID
	}
	v := &chargewatch.CreateDevicePayload{
		Description: body.Description,
	}
	if body.Name != nil {
		v.Name = *body.Name
	}
	{
		var zero string
		if v.Description == zero {
			v.Description = ""
		}
	}
	v.UserID = userID

	return v, nil
}

// BuildUpdateChargePayload builds the payload for the chargewatch updateCharge
// endpoint from CLI flags.
func BuildUpdateChargePayload(chargewatchUpdateChargeBody string, chargewatchUpdateChargeDeviceID string) (*chargewatch.UpdateChargePayload, error) {
	var err error
	var body struct {
		// charge
		Charge *ChargeRequestBodyRequestBody `form:"charge" json:"charge" xml:"charge"`
	}
	{
		err = json.Unmarshal([]byte(chargewatchUpdateChargeBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"charge\": {\n         \"charging\": true,\n         \"timestamp\": 6534498977651929528,\n         \"value\": 4532680824102535020\n      }\n   }'")
		}
	}
	var deviceID string
	{
		deviceID = chargewatchUpdateChargeDeviceID
	}
	v := &chargewatch.UpdateChargePayload{}
	if body.Charge != nil {
		v.Charge = marshalChargeRequestBodyRequestBodyToChargewatchCharge(body.Charge)
	}
	v.DeviceID = deviceID

	return v, nil
}

// BuildGetChargeHistoryPayload builds the payload for the chargewatch
// getChargeHistory endpoint from CLI flags.
func BuildGetChargeHistoryPayload(chargewatchGetChargeHistoryDeviceID string) (*chargewatch.GetChargeHistoryPayload, error) {
	var deviceID string
	{
		deviceID = chargewatchGetChargeHistoryDeviceID
	}
	v := &chargewatch.GetChargeHistoryPayload{}
	v.DeviceID = deviceID

	return v, nil
}

// BuildUpdateDevicePayload builds the payload for the chargewatch updateDevice
// endpoint from CLI flags.
func BuildUpdateDevicePayload(chargewatchUpdateDeviceBody string, chargewatchUpdateDeviceUserID string, chargewatchUpdateDeviceDeviceID string) (*chargewatch.UpdateDevicePayload, error) {
	var err error
	var body UpdateDeviceRequestBody
	{
		err = json.Unmarshal([]byte(chargewatchUpdateDeviceBody), &body)
		if err != nil {
			return nil, fmt.Errorf("invalid JSON for body, \nerror: %s, \nexample of valid JSON:\n%s", err, "'{\n      \"chargeValue\": 93\n   }'")
		}
		if body.ChargeValue < 0 {
			err = goa.MergeErrors(err, goa.InvalidRangeError("body.chargeValue", body.ChargeValue, 0, true))
		}
		if body.ChargeValue > 100 {
			err = goa.MergeErrors(err, goa.InvalidRangeError("body.chargeValue", body.ChargeValue, 100, false))
		}
		if err != nil {
			return nil, err
		}
	}
	var userID string
	{
		userID = chargewatchUpdateDeviceUserID
	}
	var deviceID string
	{
		deviceID = chargewatchUpdateDeviceDeviceID
	}
	v := &chargewatch.UpdateDevicePayload{
		ChargeValue: body.ChargeValue,
	}
	v.UserID = userID
	v.DeviceID = deviceID

	return v, nil
}
